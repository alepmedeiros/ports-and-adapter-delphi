program porstandadapter;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  Horse,
  Horse.Jhonson,
  System.JSON,
  Data.DB,
  System.SysUtils,
  DataSet.Serialize,
  connection in 'connection.pas' {DataModule1: TDataModule};

begin
  THorse.Post('/checking', procedure(Req: THorseRequest; Res: THorseResponse)
  var
    lConnection
  begin
    FConnection.FDQuery1.SQl.Clear;
    FConnection.FDQuery1.SQL.Add('select * from parcked_car');
    FConnection.FDQuery1.Open;
    Writeln(FConnection.FDQuery1.ToJSONObject.ToString);
    Writeln(req.Body);
  end);

  THorse.Get('/checking', procedure(Req: THorseRequest; Res: THorseResponse)
  begin
   //
  end);

  THorse.Listen(9000);
end.
